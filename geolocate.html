<!DOCTYPE html>
	<head>
		<title>Energe</title>
		<link href="assets/stylesheets/energe.css" rel="stylesheet" type="text/css">
		<script src="assets/javascript/energe.js"></script>
		<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
        <script>
			  $(function() {
			    var availableTags = [
			    "Albuquerque, New Mexico",
			    "Anaheim, California", 
			    "Arlington, Texas", 
			    "Atlanta, Georgia", 
			    "Aurora, Colorado", 
			    "Austin, Texas", 
			    "Bakersfield, California", 
			    "Baltimore, Maryland", 
			    "Baton Rouge, Louisiana", 
			    "Birmingham, Alabama", 
			    "Boise, Idaho", 
			    "Boston, Massachusetts", 
			    "Buffalo, New York", 
			    "Charlotte, North Carolina", 
			    "Chicago, Illinois", 
			    "Cincinnati, Ohio", 
			    "Cleveland, Ohio", 
			    "Colorado Springs, Colorado", 
			    "Columbus, Ohio", 
			    "Corpus Christi, Texas", 
			    "Dallas, Texas", 
			    "Denver, Colorado", 
			    "Detroit, Michigan", 
			    "El Paso, Texas", 
			    "Fort Worth, Texas", 
			    "Fresno, California", 
			    "Frisco, Texas", 
			    "Garland, Texas", 
			    "Greensboro, North Carolina", 
			    "Henderson, Nevada", 
			    "Houstan, Texas", 
			    "Indianapolis, Indiana", 
			    "Jacksonville, Florida", 
			    "Kansas City, Missouri", 
			    "Las Vegas, Nevada", 
			    "Lincoln, Nebraska", 
			    "Little Rock, Arkansas", 
			    "Los Angeles, California", 
			    "Louisville, Kentucky", 
			    "Madison, Wisconsin", 
			    "Memphis, Tennessee", 
			    "Mesa, Arizona", 
			    "Mesquite, Texas", 
			    "Miami, Florida", 
			    "Milwaukee, Wisconsin", 
			    "Minneapolis, Minnesota", 
			    "Montgomery, Alabama", 
			    "Nashville, Tennessee", 
			    "New Orleans, Louisiana", 
			    "New York, New York", 
			    "Newark, New Jersey", 
			    "Oakland, California", 
			    "Oklahoma City, Oklahoma", 
			    "Omaha, Nebraska", 
			    "Orlando, Florida", 
			    "Philadelphia, Pennsylvania", 
			    "Phoenix, Arizona", 
			    "Plano, Texas", 
			    "Portland, Oregon", 
			    "Providence, Rhode Island", 
			    "Raleigh, North Carolina", 
			    "Reno, Nevada", 
			    "Richmond, Virginia", 
			    "Sacramento, California", 
			    "Salt Lake City, Utah", 
			    "San Antonio, Texas", 
			    "San Diego, California", 
			    "San Francisco, California", 
			    "San Jose, California", 
			    "Santa Ana, California", 
			    "Seattle, Washington", 
			    "St. Louis, Missouri", 
			    "Stockton, California", 
			    "Tampa, Florida", 
			    "Toledo, Ohio", 
			    "Tucson, Arizona", 
			    "Tulsa, Oklahoma", 
			    "Wichita, Kansas"]
			    $( ".tags" ).autocomplete({
			      source: availableTags,
			      messages: {
			        noResults: '',
			        results: function() {}
				    }
			    });
			  });
  		</script>
	</head>
<!-- TODO REMOVE COLOR -->
	<body style ='background-color: rgb(135, 135, 35)'>
		<div class="header">
			<!-- <a href='energe.html'> -->
				<div class="logo">
					<a href='energe.html'>
						<img src="assets/images/logo-2.png" width="215px" height="97px" class='image'>
					</a>
					<!-- <div class="ui-widget">
						<label for="tags"></label>
				  	<input class="tags" type="text" placeholder="Search City">
			  	</div> -->
				</div>

		</div>
		<div class="geolocate_background">
			<!-- <div class="title">LOCATION.</div> -->
			<div class="user_prompt">
				<div class="button current">CURRENT LOCATION</div>
				<div class="button custom">ENTER LOCATION</div>
			</div>
		</div>
	</body>
</html>

<script>
$('<div class="location_image"></div>').appendTo($('.geolocate_background'))
	//when current location is clicked, find the current location, and paste it into the input box and auto search
	$('body').on('click', '.button.current', function(args) {
		// alert('current!');
	    // $(args.currentTarget).closest('.admin-bar').find('.admin-entry').not('.edit-button').not('.show-button').each(function(index, element) {
	    //   $(element).replaceWith('<input class="' + $(element).attr("class") + '" type="text" value="' + $(element).html() + '" placeholder="' + $(element).html() + '" data-name="' + $(element).data("name") + '">');
	    // })
		$(args.currentTarget).closest('.user_prompt').remove();
		$('<div class="ui-widget"><label for="tags"></label><input class="tags" type="text" placeholder="Search City"></div>').appendTo($('.logo'))
		$.getJSON('http://freegeoip.net/json/', function(location) {
			//if ip address is trackable
			if (location.city && location.region_name) {
			 	$(".tags").val(location.city.toUpperCase() + ', ' + location.region_name.toUpperCase())
			 	$.ajax({
	        url: "http://michaelscaria.herokuapp.com/location?state=texas&city=dallas",

	        success: function( data ) {
	          console.log('DATA: ' + data.image_url)
	          // $('.geolocate_background').css('background-image' ,'url(' +data.image_url+ ');')
	          // $('<div class="location_image" style="background-image: url(' +data.image_url+ ')"></div>').appendTo($('.geolocate_background'))
	          // var background_image = 'url("https://s3-us-west-1.amazonaws.com/michaelscaria/location/texas/Dallas.png");'
	          $('<div class="location_image" style="background-image: url("https://s3-us-west-1.amazonaws.com/michaelscaria/location/texas/Dallas.png"); height: 500px;"></div>').appendTo($('.geolocate_background'))
	        }
		      
		    });
			};
		});
	})


	$('body').on('click', '.button.custom', function(args) {
		$(args.currentTarget).closest('.user_prompt').remove();
		$('<div class="ui-widget"><label for="tags"></label><input class="tags" type="text" placeholder="Search City"></div>').appendTo($('.logo'))

	})

	// $(document).ready( function() { 
		
	// });

	// {
	//    source: "smart-ip.net",
	//    host: "14.200.158.65",
	//    lang: "en",
	//    countryName: "Australia",
	//    countryCode: "AU",
	//    city: "South Sydney Municipality",
	//    region: "New South Wales",
	//    latitude: "-33.9000",
	//    longitude: "151.2000",
	//    timezone: "Australia/NSW"
	// }

</script>
